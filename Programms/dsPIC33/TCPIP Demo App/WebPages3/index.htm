<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="./style/style.css" />
    <script src="./jquery.js"></script>
    <script src="./stars/Tycho2.js" type="text/javascript"></script>
    <script src="./astro.js" type="text/javascript"></script>
    <script src="./mchp.js" type="text/javascript"></script>
    <script src="./stars/StarName.js" type="text/javascript"></script>

</head>
<body>
    <div id="shadow-one"><div id="shadow-two"><div id="shadow-three"><div id="shadow-four">
    <div id="page">
    <div style="padding:0 0 5px 5px"><img src="./mchp.gif" alt="Microchip" /></div>

    <div id="title"><div class="right"></div><span id="hello">&nbsp;</span></div>
    <div id="menu">
        <a href="./index.htm">Обзор</a>
        <a href="./auth.htm">Идентификация</a>
        <a href="./cookies.htm">Cookies</a>
        <!--a href="/upload.htm">File Uploads</a-->
        <a href="./protect/config.htm">Настройка сети</a>
		<a href="./protect/monty.htm">Настройка монтировки</a>
    </div>
<script type="text/javascript">
    document.body.onload = loadCanvas;
    document.getElementById('hello').innerHTML = "~hellomsg~";
</script>
    <div id="leftboth">
        <div id="status">
            <div id="loading" style="display:none">Ошибка:<br />Подключение потеряно.</div>
            <div id="display">
                <label>UTC:</label><br /><output id="UTCTime">0</output><br />
                <!--label>Eq. of Time:</label><br /><output id="EqEq">0</output><br /-->
                <label>Широта :</label><br /><output id="Lt">55° 47' 29.17"</output><br />
                <label>Долгота:</label><br /><output id="Lg">37° 36' 10.08"</output><br />
                <label>LST:</label><br /><output id="LST">0</output>
            </div>
        </div>
        <div id="status">
            <div id="display">
                <label>Координаты телескопа:</label><br />
                <output id="angR0">&bull;</output><label> α :</label><output id="ang0">+5° 36' 12.72"</output><br />
                <output id="angR1">&bull;</output><label> δ :</label><output id="ang1">-1° 12' 3.60"</output>
            </div>
        </div>
        <div id="target">
            <div id="ReqTarget">
                <label>Координаты цели</label><br />
                <form method="post" action="index.htm" name="run">
                    <output id="VisRA" style="margin-left: 15px;">&bull;</output>
                    <label>α :</label>
                    <span class="targetRA" id="tgRA">
                        <input type="text" name="RA_h" id="RAh" value="00" min="-1" max="23" onchange="updateTarget(1);">h
                        <input type="text" name="RA_m" id="RAm" value="00" min="-1" max="60" onchange="updateTarget(1);">'
                        <input type="text" name="RA_s" id="RAs" value="00" min="-1" max="60" onchange="updateTarget(1);" style="width:40px;">"
                    </span><br />
                    <output id="VisDE" style="margin-left: 15px;">&bull;</output>
                    <label>δ : </label>
                    <span class="targetRA" id="tgDE">
                        <input type="text" name="DE_h" id="DEh" value="00" min="-90" max="90" onchange="updateTarget(2);">°
                        <input type="text" name="DE_m" id="DEm" value="00" min="-1" max="60" onchange="updateTarget(2);">'
                        <input type="text" name="DE_s" id="DEs" value="00" min="-1" max="60" onchange="updateTarget(2);"style="width:40px;">"
                    </span><br />
                    <input id="clock" class="chbox" type="checkbox" onclick="enableHM();" checked="true">Часовое ведение<br />
                    <!-- <output id="Speed" style="margin-left: 15px;">0</output><br /> -->
                    <div>
                    <input id="gotobutton" type="button" value="GoTo!" onclick="GoTo();">
                    <input id="stopbutton" type="button" value="Stop" onclick="Stop();">
                    </div>
                    <div>
                    <input id="optionbtn" type="button" value="Option">
                    </div>
                </form>
            </div>
        </div>
        <div id="control">
            <div id="dControl">
                <form>
                    <label>Масштаб</label> <br />
                    <input class="ControlScale" id="starScale" type="range" value="25" min="2" max="1000" step="1" onchange="updateScale(1);" >
                    <input class="ControlScaleN" type="number" id="starScaleN" value="25" min="2" max="1000" onchange="updateScale(2);">
                    <label>Звездная величина</label> <br />
                    <input class="ControlScale" id="starMagn" type="range" value="9" min="0" max="9" step="0,1" onchange="updateMagn(1);" >
                    <input class="ControlScaleN" type="number" id="starMagnN" value="9" min="0" max="9" onchange="updateMagn(2);">
                    <br /><input id="followbox" class="chbox" type="checkbox" onclick="enableFollow();" checked="false"><span>Следить</span><br />
                </form>
            </div>
        </div>
        <div id="info_Star">
            <label>Выбрана звезда:</label><br />
			<div id="info_loutName"><label>Name:</label><output id="info_outName"></output></div>
            <label>TYC: </label><output id="info_outTYC"></output><br />
            <label>HIP: </label><output id="info_outHIP"></output><br />
            <label>α: </label><output id="info_outSa"></output><br />
            <label>δ: </label><output id="info_outSg"></output><br /> 
            <div id="info_loutBTmag"><label>BTmag: </label><output id="info_outBTmag"></output></div>
            <div id="info_loutVTmag"><label>VTmag: </label><output id="info_outVTmag"></output></div>
        </div>
        <div id="progressbar"> 
            <div><label>Загружено:</label><output id="out_starCount"></output></div>
            <div id="StarCounter"></div>
            <div style="clear: both;"></div>
        </div>
    </div>
    <div id="CanvasBox">
        <canvas id="my_canvas" width="580" height="580"></canvas> 
    </div>
    <!--X:<output id="X">55° 47' 29.17"</output>
    Y:<output id="Y">55° 47' 29.17"</output>
    Z:<output id="Z">55° 47' 29.17"</output>-->
    <div style="clear: both;"></div>
<script type="text/javascript">

    // подсказка с координатами
    new Tooltip({
        elem: $('#my_canvas'),
        html: "<label>α : </label><output id=\"outXt\"></output><br />" +
        "<label>δ : </label><output id=\"outYt\"></output>" +
        "<div id=\"StarInfo\"> Found star:<br />"+
        "<label>TYC:</label><output id=\"outTYC\"></output><br />" +
        "<label>HIP:</label><output id=\"outHIP\"></output><br />" +
        "<div id=\"loutName\"><label>Name:</label><output id=\"outName\"></output></div>" +
        "<label>α : </label><output id=\"outSa\"></output><br />" +
        "<label>δ : </label><output id=\"outSg\"></output><br />" + 
        "<div id=\"loutBTmag\"><label>BTmag : </label><output id=\"outBTmag\"></output></div>" +
        "<div id=\"loutVTmag\"><label>VTmag : </label><output id=\"outVTmag\"></output></div></div>"
    });
    // Опции
    //new Tooltip({
    //    elem: $('#my_canvas'),
    //    html: "<div>" +
    //            "<input id=\"optionbtn\" type=\"button\" value=\"Option\">" + 
    //        "</div>"
    //});
    <!--
// Parses the xmlResponse from status.xml and updates the status box
function updateStatus(xmlData) {
    var mainstat = document.getElementById('display').style.display;
    var loadstat = document.getElementById('loading').style.display;
    // Check if a timeout occurred
    if(!xmlData)
    {
        mainstat = 'none';
        loadstat = 'inline';
        return;
    }

    // Make sure we're displaying the status display
    mainstat = 'inline';
    loadstat = 'none';
    var needUpdateStar = false;
    // 55.791437,37.6028
    for(i = 0; i < 2; i++){
        var angle = +getXMLValue(xmlData, 'ang' + i);//*180/Math.PI;
        if(i==0) {
            if(angle){
                var now = new Date();
                var utDay = now.getUTCDate();
                var utMonth = now.getUTCMonth()+1;
                var utYear = now.getUTCFullYear();
                var utHours = now.getUTCHours();
                var utMinutes = now.getUTCMinutes();
                var utSeconds = now.getUTCSeconds();
                var utmSeconds = now.getUTCMilliseconds();
                if (utYear<1900) utYear=utYear+1900;

                UT = utHours + (utMinutes + ( utSeconds + utmSeconds/1000)/60)/60;

                var JD = JulDay (utDay, utMonth, utYear, UT);
                var LST = LM_Sidereal_Time(JD, GeoPosition.Lon);
                document.getElementById('LST').value =  LST;

                correctAngle = angle - 90 + LocalStarTime * 15;
                if(correctAngle>=360) correctAngle-=360;
                if(correctAngle<0) correctAngle+=360;
                document.getElementById('ang' + i).innerHTML = AngleToString(correctAngle,true);
                CurrentPosition.X = correctAngle;
                needUpdateStar = true;
            }
        } else if(i==1){
            if(angle){
                correctAngle = angle - 90 + GeoPosition.Lat;
                document.getElementById('ang' + i).innerHTML = AngleToString(correctAngle,false);
                CurrentPosition.Y = correctAngle
                needUpdateStar = true;
            }
        }
    }
    for(i = 0; i < 2; i++ ){
        var angleRun = +getXMLValue(xmlData, 'angR' + i);
        switch (angleRun) {
            case 0: color = "#FF0000"; break;
            case 1: color = "#00FF00"; break;
            default: color = "#777777"; break;
        }
        document.getElementById('angR' + i).style.color = color;
    }
    if(Follow){
        ViewPosition.SetPosition(CurrentPosition.X,CurrentPosition.Y);
    } else {
        ViewPosition.SetPosition(ViewPosition.X,ViewPosition.Y);
    }
    if(needUpdateStar)
        if(!DrawingStar) StarView.updateStars();
}
setTimeout("newAJAXCommand('status.xml', updateStatus, true)", 2000);

</script>
<div class="spacer">&nbsp;</div>
<div id="footer">Copyright &copy; 2012 Moshkalev Dmitriy.</div>

</div></div></div></div></div>

</body>
</html>